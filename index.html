<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Filippo e Serena</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<link rel="stylesheet" href="assets/webfonts/fonts.css" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/added.css" />

		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">

		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
<!-- Modal for imgs full screen -->
<div id="imgModal" class="modal">

	<!-- The Close Button -->
	<span id="closemodal" class="close">&times;</span>

	<!-- Modal Content (The Image) -->
	<img class="modal-content" id="imgInModal">

	<!-- Modal Caption (Image Text)-->
	<div id="modalCaption"></div>
</div>
		<!-- Wrapper -->
			<div id="wrapper">



				<!-- Header -->
					<header id="header">
						<!--div class="logo">
							<span class="icon fa-gem"></span>
						</div-->
						<div class="content">
							<p class="data">2 · 10 · 2021</p>
							<div class="inner">
								<img src="./images/noi.png" alt="" width="580px">
								<h1>Filippo Carnovalini <br/>e Serena Mantovani</h1>
								<!--p>A fully responsive site template designed by <a href="https://html5up.net">HTML5 UP</a> and released<br />
								for free under the <a href="https://html5up.net/license">Creative Commons</a> license.</p-->
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="#data">La Data</a></li>
								<li><a id="noiduetrigger" href="#noi-due">Noi Due</a></li>
								<li><a href="#regali">Regali</a></li>
								<li><a href="#rsvp">RSVP</a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- data -->
							<article id="data">
								<h2 class="major">La Data</h2>
								<!--span class="image main"><img src="images/pic01.jpg" alt="" /></span-->
								<div>
									<p id="dataBig">2 · 10 · 2021</p>
								</div>
								<p>La cerimonia si svolgerà alle <strong>10.30</strong> presso la <strong>Chiesa di Santa Lucia Extra</strong>, a Verona in Via Santa Elisabetta 19. È possibile parcheggiare nelle vie adiacenti alla chiesa. <a target="_blank" href="https://www.google.com/maps/dir//Chiesa+di+Santa+Lucia+Extra,+Via+Santa+Elisabetta,+19,+37137+Verona+VR/@45.4219004,10.9509592,19z/data=!4m16!1m6!3m5!1s0x4781e1cec54c2853:0xab6bd0113330e620!2sChiesa+di+Santa+Lucia+Extra!8m2!3d45.4220633!4d10.9520282!4m8!1m0!1m5!1m1!1s0x4781e1cec54c2853:0xab6bd0113330e620!2m2!1d10.9520282!2d45.4220633!3e2">Indicazioni</a></p>
								<p>A seguire, il ricevimento si terrà nel ristorante <strong>Da Valentino</strong>, a San Germano dei Berici in via Casona 10. <a target="_blank" href="https://www.google.com/maps/dir/Chiesa+di+Santa+Lucia+Extra,+Via+Santa+Elisabetta,+Verona,+VR/Ristorante+Da+Valentino,+Via+Casona,+10,+36044+Val+Liona+VI/@45.4177189,11.425443,10612m/data=!3m1!1e3!4m14!4m13!1m5!1m1!1s0x4781e1cec54c2853:0xab6bd0113330e620!2m2!1d10.9520282!2d45.4220633!1m5!1m1!1s0x477f3c05935f3b4f:0xafecf03dd96d6e7d!2m2!1d11.4592486!2d45.3984171!3e0">Indicazioni</a></p>
								
								<p>Per la partecipazione alla cerimonia non è richiesto, per le normative vigenti, il possesso del green pass. Per il ricevimento invece occorre possedere una "certificazione verde" valida. La certificazione si ottiene facendo un tampone al massimo 48 ore prima dell'evento, dopo dieci giorni dalla prima dose di vaccino, o dopo essere guariti.<br/>
								<a target="_blank" href="https://covidzone.info/">Aggiornamenti sulla normativa in vigore</a><br/>
								<a target="_blank" href="https://covidzone.info/">Info su certificazioni verdi</a><br/>
								Nei giorni precedenti il matrimonio vi faremo avere ulteriori indicazioni operative a riguardo. Grazie per l'aiuto nell'avere questa attenzione nei confronti di tutti. </p>
							</article>

						<!-- noi-due -->
							<article id="noi-due">
								<h2 class="major">Su Noi Due</h2>
								<div class="image main clear"><img id='imgnoi' onclick='apriImgModal(this)' style="width:75%;display:block;margin:0 auto;"src="./images/cappuccio2.jpeg" alt="Una foto di noi risalente al 2018" /><!--img id='imgnoidis' onclick='apriImgModal(this)' style="width:75%;display:block;margin:0 auto;"src="./images/cappucciodis.jpg" alt="Una disegno di noi risalente al 2018" /--></div>
								<br/>
								<p><strong>18/01/2017</strong> - Dopo un incontro ci siamo fermati a parlare, perché Filippo voleva chiedere un aiuto con il lavoro del coro. Così abbiamo cominciato a sentirci più spesso, a pranzare insieme in università, a studiare assieme in sessione.</p>
								<p><strong>31/03/2017</strong> - La prima uscita e la prima cena in due, in occasione di uno spettacolo della Compagnia Ruzzante.</p>
								<span class="image main clear"><img src="./images/ramoscello2.png" alt="" /></span>
								<br/>
								<p><strong>21/04/2017</strong> - <em>L'inizio della nostra relazione.</em></p>
								<p><strong>25/10/2019</strong> - Corso fidanzati ad Assisi. E matura in noi il desiderio di voler passare assieme tutta la vita nel matrimonio.</p>
								<span class="image main clear"><img onclick='apriImgModal(this)' style="width:75%;display:block;margin:0 auto;"src="./images/mille_anello.jpeg" alt="I regali del 18 Gennaio: una copia de Le Mille e Una Notte, e l'anello con rubino e brillanti." /></span>
								<br/>
								<p><strong>18/01/2020</strong> -
								Al santuario di Monte Berico Filippo regala a Serena Le Mille e Una Notte: come nel libro, sono passati mille e due giorni dall'inizio della relazione, e Filippo le chiede di poter passare tutta la vita insime. Con un anello ci siamo promessi di sposarci.
							 </p>
								<p><strong>02/10/2021</strong> - <em>L'inizio del nostro matrimonio.</em></p>
								<span class="image main clear"><img style="width:45%;display:block;margin:0 auto;border-radius:0"src="./images/noipoke.gif" alt="" /></span>
								<br/>
							</article>

						<!-- regali -->
							<article id="regali">
								<h2 class="major">Lista Nozze</h2>
								<span class="image main clear"><img src="./images/casina.png" alt="" /></span>
								<p>L'anno passato ci ha insegnato che la presenza è davvero un regalo. Per questo ci teniamo a sottolineare che non è necessario regalarci qualcosa: per noi avervi e festeggiare insieme sarà già un grandissimo dono.</p>
								<p>Se avete piacere di aiutarci a costruire la nostra casa e la nostra vita assieme, potete farci avere liberamente un contributo al matrimonio. Similmente, se avete un desiderio di farci avere un regalo fisico, che ci ricordi di voi e di questo giorno, qui sotto c'è una piccola lista nozze.</p>

								<div id="listanozze">
									<ul id="ullistanozze">
									</ul>
								</div>

								<p>Se volete dare un contributo libero per la casa e il viaggio di nozze, potete anche fare un bonifico alle seguenti coordinate:<br/>
								<code>Iban: IT88M0305801604100571981563</code><br/>
								<code>Intestato a Filippo Carnovalini</code>
								</p>


							</article>

						<!-- rsvp -->
							<article id="rsvp">
								<h2 class="major">Rsvp</h2>
								<div class="noScript">
									<p class="noScript">Non hai javascript attivo sul tuo Browser,
										per cui non puoi usare il form di conferma online.</p>
									<p class="noScript">Contatta gli
									  sposi per confermare la tua presenza!</p>
								</div>
								<form id="rsvpForm" method="post" action="#">
									<p>Fateci sapere se potrete esserci al ricevimento di nozze, e se avete esigenze particolari di cui tenere conto.</p>
									<div class="fields">
										<div class="field half">
											<label for="name">Nome</label>
											<input type="text" name="name" id="name" />
											<p id="nameError" class="error" style="display:none">Campo obbligatorio!</p>
										</div>
										<div class="field half">
											<label class="long" for="persone">Numero di persone</label>
											<input type="text" name="persone" id="persone" />
											<p id="personeError" class="error" style="display:none">Scrivi un numero intero di persone.</p>
										</div>
										<div class="field">
											<label for="message">Note</label>
											<textarea placeholder="Intolleranze, allergie, età dei bambini, necessità di seggiolini..." name="message" id="message" rows="3"></textarea>
										</div>
									</div>
									<ul class="actions">
										<li><input type="button" value="Invia" class="primary" id="submitRSVP"/></li><li id="loading" style="display:none"><div  class="loader"></div></li>
									</ul>
									<div id="erroreServer" style="display:none">
										<p class="error">Errore: <span id="serverErrorText"></span></p>
									</div>
								</form>

								<div id="successo" style="display:none">
									<p>Conferma inviata con successo.</p>
									<p>Ci vediamo il 2 Ottobre!</p>
								</div>
								<!--



							-->
							</article>


					</div>

				<!-- Footer -->
				<footer id="footer">
					<p class="copyright"><a href="./admin.html">Admin</a> - <a href="./info.html">Info</a></p>
				</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
			$( document ).ready(function() {
				var regalihtml= [];
				$.getJSON('listanozze.json', function(data) {
				   var l = data.lista;
					 l.forEach((item, i) => {
					 		regalihtml.push(item.id);
							$("#ullistanozze").append("<li id='regalo"+item.id+"'>"+item.descr+" <span class='prezzoregalo'>"+item.prezzo+"€</span> - <span class='prenota'>Prenota</span><span class='prenotato'>Già prenotato</span></li>")


					 });

					 $(".prenota").click(function(e){
 						if ($(this).parent()[0] == $("#prenotaregalo").parent()[0]){
 							return
 						}
 						$("#prenotaregalo").attr("id","prenotaregaloold");
 						$("#prenotaregaloold").hide();//(function(){
 							$("#prenotaregaloold").remove();
 					//});
 						var item = $(this).parent();

 						var id = item.attr('id');
						var aggiunta= `
						<div style='display:none' id='prenotaregalo'>
							<div class='divimgregalo'>
								<img onclick='apriImgModal(this)' id='imgregalo' class='imgregalo' src='./images/regali/${id}.jpg'>
							</div>
							<div class='regaloTesto' style='display:inline-block'>
								<p id='prenotaistruzioni'>Per prenotare questo regalo, inserisci il tuo nome qui sotto e premi invia. Dopo potrai fare avere agli sposi la cifra relativa al regalo scelto.</p>
								<p style='display:none' id='prenotaiban'><code>Iban: IT88M0305801604100571981563</code><br/>
								<code>Intestato a Filippo Carnovalini</code></p>
								<p id='prenotaerror' class='error'></p>
							</div>
							<div id='bottoniRegali'>
								<input id="prenotaRegaloNome" placeholder="Nome..." type='text' /><button onclick="prenotaRegalo('${id}')">Invia</button>
							</div>
						</div>
`
 						item.append(aggiunta)
 						$("#prenotaregalo").show("slow");
 						//$("#prenotaregalo").parent()[0].scrollIntoView();



 					});

				});



				$.post( "https://europe-west3-matrimonio-303209.cloudfunctions.net/listregalipublic", {}, function(regali) {
					regalihtml.forEach((item, i) => {
						regali.forEach((itemserv, j) => {
							if(item == itemserv["id"]){
								if(itemserv["taken"]==true){
									$("#regalo"+item).addClass("regalotaken");
								}
							}
						});


					});
				}).fail(function(invitati) {

					})
					.always(function() {

					});



			});// Doc ready




			// Get the modal
			var modal = document.getElementById("imgModal");
			var captionText = document.getElementById("modalCaption");

			function apriImgModal(i) {

				// Get the image and insert it inside the modal - use its "alt" text as a caption
				var img = i;
				var modalImg = document.getElementById("imgInModal");
			  modal.style.display = "block";
			  modalImg.src = img.src;
				captionText.innerHTML = img.alt;
			}

			// Get the <span> element that closes the modal
			var span = document.getElementById("closemodal");

			// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
			  modal.style.display = "none";
			}
			// When the user clicks on modal outside img, close the modal
			modal.onclick = function(ev) {
				if(ev.target!=$("#imgInModal")[0])	{
					modal.style.display = "none";
				}
			}

			function prenotaRegalo(i){
				var id = i.slice(6);
				//console.log(id);
				$("#prenotaRegaloNome").removeClass("erroreNome");
				$("#prenotaRegaloNome").attr('placeholder', 'Nome...');
					var nome= $("#prenotaRegaloNome").val();
					if (nome==""){
						$("#prenotaRegaloNome").addClass("erroreNome");
						$("#prenotaRegaloNome").attr('placeholder', 'Campo necessario!');
						return;
					}
					//send to server
					$("#bottoniRegali").empty();
					$("#bottoniRegali").append("<p class='loadingdots'>Loading <span>.</span><span>.</span><span>.</span></p>")


					$.post( "https://europe-west3-matrimonio-303209.cloudfunctions.net/prenotaregalo", {"id":id,"name":nome}, function(response) {
						$("#prenotaistruzioni").text("Grazie mille! Hai prenotato il regalo. Per regalarlo effettivamente, inviaci un bonifico dell'importo corrispondente:");
						$("#prenotaiban").show();
						$(".prenota").hide();


					}).fail(function(results) {
						if (results.responseText == "Error_Already_Taken") {
							$("#prenotaerror").text("Errore: questo regalo è già stato prenotato. Ricarica la pagina!");
						}else if (results.responseText == "Not_Found"){
							$("#prenotaerror").text("Errore: sembra che questo regalo non esista? Contatta gli sposi se pensi ci sia un problema!");
						}else if (results.responseText == "Error_Data_Missing") {
							$("#prenotaerror").text("Errore: Compila tutti i campi necessari! Ricarica la pagina e riprova");
						}else{
							$("#prenotaerror").text("Errore!");
						}
						$("#prenotaerror").show();

					}).always(function() {
							$("#bottoniRegali").empty();
					});

			}//prenotaregalo



			$("#noiduetrigger").click(function(e){

				//$("#imgnoi").delay(1000).fadeTo(5000,0);

			});

			</script>


	</body>
</html>
